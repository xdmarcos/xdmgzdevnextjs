"use client";

import Image from "next/image";
import { useState, useEffect } from "react";

type Lang = "es" | "en";

type Translation = {
  title: string;
  about: string;
  aboutText: string;
  skills: string;
  skillsList: string[];
  experience: string;
  jobs: { company: string; role: string }[];
  projects: string;
  project1: string;
  project2: string;
  education: string;
  educationList: string[];
  contact: string;
  form: {
    name: string;
    email: string;
    message: string;
    submit: string;
  };
  footer: string;
};

const translations: Record<Lang, Translation> = {
  es: {
    title: "Desarrollador iOS Senior",
    about: "Sobre m√≠",
    aboutText: "He estado en el √°rea de desarrollo m√≥vil desde 2011, participando en todos los aspectos del ciclo de vida de un proyecto: desde la definici√≥n del producto, dise√±o t√©cnico, planificaci√≥n de hitos, creaci√≥n de prototipos, desarrollo, publicaci√≥n y distribuci√≥n. Ser una persona orientada a resultados y anal√≠tica me ha ayudado a encontrar r√°pidamente buenas soluciones para resolver problemas complejos. Actualmente, me enfoco principalmente en liderar el equipo de iOS, configurar pipelines de CI/CD, definir la arquitectura de la aplicaci√≥n, implementar nuevas funcionalidades y brindar mentor√≠a en un entorno √°gil. Para conocer un poco m√°s sobre m√≠, te invito a visitar mi perfil.",
    skills: "Habilidades T√©cnicas",
    skillsList: [
      "Lenguajes: Swift, Objective-C, SwiftUI",
      "Arquitecturas: CLEAN, MVVM, VIPER, TCA",
      "Testing: XCTest, KIF",
      "CI/CD: Fastlane, Jenkins, Azure, Bitrise, CircleCI",
      "Buenas pr√°cticas: SOLID, Atomic Design",
      "Metodolog√≠as √°giles: SCRUM, Kanban"
    ],
    experience: "Experiencia Profesional",
    jobs: [
      { company: "Xapo Bank", role: "Apps Tribe Lead, Senior iOS Developer (2022‚Äìpresente)" },
      { company: "ABN", role: "Senior iOS Developer (2021‚Äì2022)" },
      { company: "Rabobank", role: "Team Lead, Senior iOS Developer (2019‚Äì2021)" },
      { company: "Accenture Interactive", role: "Team Lead, Senior iOS Developer (2017‚Äì2019)" },
      { company: "Mobgen", role: "Team Lead, iOS Developer (2014‚Äì2017)" }
    ],
    projects: "Proyectos con Capturas",
    project1: "Plataforma bancaria digital.",
    project2: "App de banca m√≥vil con trading integrado.",
    education: "Educaci√≥n y Certificaciones",
    educationList: [
      "M√°ster en Ingenier√≠a de Software ‚Äì Universidad de Vigo",
      "Grado en Ingenier√≠a Inform√°tica ‚Äì Universidad de Vigo",
      "Scrum Master & Product Owner ‚Äì Scrum.org"
    ],
    contact: "Contacto",
    form: {
      name: "Nombre:",
      email: "Correo electr√≥nico:",
      message: "Mensaje:",
      submit: "Enviar"
    },
    footer: "Portfolio Web con Next.js"
  },
  en: {
    title: "Senior iOS Developer",
    about: "About Me",
    aboutText: "I have been in the mobile development area since 2011 being involved in every aspect of a project life cycle, from product definition, technical design, planning milestones, prototyping, development, release and distribution. Being a result-driven and an analytical person helped me to rapidly find good approaches for solving complex problems. These days I'm mainly focused on leading the iOS team, setting up CI/CD pipelines, defining the App's architecture, implementing new features and mentoring others in an agile environment. To know a bit more about me, please take a look to my profile.",
    skills: "Technical Skills",
    skillsList: [
      "Languages: Swift, Objective-C, SwiftUI",
      "Architectures: CLEAN, MVVM, VIPER, TCA",
      "Testing: XCTest, KIF",
      "CI/CD: Fastlane, Jenkins, Azure, Bitrise, CircleCI",
      "Best Practices: SOLID, Atomic Design",
      "Agile Methods: SCRUM, Kanban"
    ],
    experience: "Work Experience",
    jobs: [
      { company: "Xapo Bank", role: "Apps Tribe Lead, Senior iOS Developer (2022‚Äìpresent)" },
      { company: "ABN", role: "Senior iOS Developer (2021‚Äì2022)" },
      { company: "Rabobank", role: "Team Lead, Senior iOS Developer (2019‚Äì2021)" },
      { company: "Accenture Interactive", role: "Team Lead, Senior iOS Developer (2017‚Äì2019)" },
      { company: "Mobgen", role: "Team Lead, iOS Developer (2014‚Äì2017)" }
    ],
    projects: "Featured Projects",
    project1: "Digital banking platform.",
    project2: "Mobile banking app with integrated trading.",
    education: "Education & Certifications",
    educationList: [
      "Master in Software Engineering ‚Äì University of Vigo",
      "Bachelor in Computer Engineering ‚Äì University of Vigo",
      "Scrum Master & Product Owner ‚Äì Scrum.org"
    ],
    contact: "Contact",
    form: {
      name: "Name:",
      email: "Email:",
      message: "Message:",
      submit: "Send"
    },
    footer: "Marcos Gonz√°lez"
  }
};

export default function TranslatedPortfolio() {
  const [lang, setLang] = useState<Lang>("es");

  useEffect(() => {
    const storedLang = localStorage.getItem("preferredLang") as Lang;
    if (storedLang === "es" || storedLang === "en") {
      setLang(storedLang);
    }
  }, []);

  const changeLang = (newLang: Lang) => {
    setLang(newLang);
    localStorage.setItem("preferredLang", newLang);
  };

  const t = translations[lang];

  return (
    <main className="container">
      <header className="centered">
        <h1>xdmGzDev</h1>
        <p>{t.title}</p>
        <div className="social">
          <a href="mailto:xdmgzdev@gmail.com">‚úâÔ∏è Email</a>{" "}
          <a href="https://www.linkedin.com/in/marcosagonzalezpinheiro" target="_blank">üîó LinkedIn</a>
        </div>
        <div style={{ marginTop: "1rem" }}>
          <button onClick={() => changeLang("es")} style={lang === "es" ? styles.activeLang : styles.lang}>ES</button>
          <button onClick={() => changeLang("en")} style={lang === "en" ? styles.activeLang : styles.lang}>EN</button>
        </div>
      </header>

      <section>
        <h2>{t.about}</h2>
        <p>{t.aboutText}</p>
      </section>

      <section>
        <h2>{t.skills}</h2>
        <ul>
          {t.skillsList.map((item, i) => <li key={i}>{item}</li>)}
        </ul>
      </section>

      <section>
        <h2>{t.experience}</h2>
        <ul>
          {t.jobs.map((job, i) => (
            <li key={i}><strong>{job.company}</strong> ‚Äì {job.role}</li>
          ))}
        </ul>
      </section>

      <section>
        <h2>{t.projects}</h2>
        <div className="gallery">
          <div>
            <Image src="/project1.png" alt="Project 1" width={400} height={250} />
            <p><strong>Xapo Bank</strong> ‚Äì {t.project1}</p>
          </div>
          <div>
            <Image src="/project2.png" alt="Project 2" width={400} height={250} />
            <p><strong>Rabobank</strong> ‚Äì {t.project2}</p>
          </div>
        </div>
      </section>

      <section>
        <h2>{t.education}</h2>
        <ul>
          {t.educationList.map((item, i) => <li key={i}>{item}</li>)}
        </ul>
      </section>

      <section>
        <h2>{t.contact}</h2>
        <form action="mailto:hello@xdmgz.com" method="post" encType="text/plain">
          <label htmlFor="name">{t.form.name}</label>
          <input type="text" name="name" required />
          <label htmlFor="email">{t.form.email}</label>
          <input type="email" name="email" required />
          <label htmlFor="message">{t.form.message}</label>
          <textarea name="message" rows={5} required></textarea>
          <button type="submit">{t.form.submit}</button>
        </form>
      </section>

      <footer>
        ¬© 2025 xdmGzDev ‚Äì {t.footer}
      </footer>
    </main>
  );
}

const styles = {
  lang: {
    margin: "0 8px",
    padding: "6px 12px",
    border: "1px solid #ccc",
    backgroundColor: "#fff",
    color: "#333",
    cursor: "pointer",
    borderRadius: "4px",
  },
  activeLang: {
    margin: "0 8px",
    padding: "6px 12px",
    border: "1px solid #0070f3",
    backgroundColor: "#0070f3",
    color: "#fff",
    cursor: "pointer",
    borderRadius: "4px",
  },
};